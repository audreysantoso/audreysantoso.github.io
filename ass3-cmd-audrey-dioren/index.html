<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
	<script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/v5.0.1/dist/aframe-extras.min.js" ></script>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=STIX+Two+Text:ital,wght@0,400;0,500;0,700;1,400&display=swap" rel="stylesheet"> 
	<title>The Old Lady's House</title>
	<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>

<!--TEXTS-->
<div id="premsg">
		<div id="title" class="popcont-first">
			<div class="text-container" id="text-zero">
				<h1>THE OLD LADY<span>'</span>s HOUSE</h1>
				<button onclick="document.getElementById('title').style.opacity = '0'; document.getElementById('intro').style.opacity = '1'; document.getElementById('intro').style.display = 'block'; playambi()">Continue</button>
			</div>
		</div>
		<div id="intro" class="popcont">
			<div class="text-container" id="text-one">
				<p>BACK IN THE 1940S, AN OLD MAN WAS CLAIMED TO BE MYSTERIOUSLY MURDERED. UNTIL 1 WEEK LATER, HIS WIFE COMMITTED SUICIDE AND LEFT A NOTE.</p>
				<button onclick="document.getElementById('intro').style.opacity = '0'; document.getElementById('letter').style.opacity = '1'; document.getElementById('letter').style.display = 'block'">Next ></button>
			</div>
		</div>

		<div id="letter" class="popcont">
			<div class="text-container" id="text-two">
				<p>Why are you here? <br>
				I have sent you to where you belong. <br>
				Why are you still here?<br>
				No more I will be disturbed<br>
				No more I will be scared<br>
				No more will you contact me<br>
				Alive and dead you torture me<br>
				The radio and telephone is dead<br>
				At day I am awake, at night I cannot sleep<br>
				Life is miserable before and after<br>
				No more I will lie, Either it is any way to die<br>
				I had married the wrong nag nag nag<br>
				I had lost my life<br>
				</p>
				<button onclick="document.getElementById('letter').style.opacity = '0'; document.getElementById('outro').style.opacity = '1'; document.getElementById('outro').style.display = 'block'">Next ></button>
				<button class="back" onclick="document.getElementById('intro').style.opacity = '1'; document.getElementById('letter').style.opacity = '0'; document.getElementById('letter').style.display = 'none'; document.getElementById('intro').style.display = 'block'">< Back</button>
			</div>
		</div>

		<div id="outro" class="popcont">
			<div class="text-container" id="text-three">
				<p>NO ONE EVER FINDS THE OLD MAN’S BODY AND LEGEND SAYS THEIR SPIRIT LINGER AROUND THE HOUSE.</p>
				<button onclick="document.getElementById('outro').style.opacity = '0';document.getElementById('outro').style.display = 'none'; document.getElementById('premsg').style.display = 'none';">Next ></button>
				<button class="back" onclick="document.getElementById('letter').style.opacity = '1'; document.getElementById('outro').style.opacity = '0'; document.getElementById('outro').style.display = 'none'; document.getElementById('letter').style.display = 'block'">< Back</button>
			</div>
		</div>
	</div>
	
<!--AFRAME-->
	<a-scene renderer="colorManagement: true">
		<!--camera-->
		<a-entity camera position="0 458.952 -411.529" look-controls wasd-controls="acceleration: 10000">
			<a-cursor fuse="true" fuseTimout="500"></a-cursor>
		</a-entity>

		<!--objects-->
		<a-entity id="house" 
					gltf-model="models/house/scene.gltf" 
					position="-2 -0.5 -5" 
					scale="0.5 0.5 0.5">
		</a-entity>
		<a-image src="images/floor.png" 
					position="-2.7471 9.51323 -186.03738" 
					scale="2370.09636 1264.30127 20.72822" 
					rotation="90.00021045914971 0 0">
		</a-image>
		<a-entity id="door-frame" gltf-model="models/door-frame/scene.gltf" position="-722.18588 6.51968 435.06671" scale="2.42674 0.72 0.57" rotation="0 90 0">
		</a-entity>
		<a-box id="doorparent" material="transparent: true; opacity: 0" geometry="depth: 3; height: 580; width: 290" scale="1.70836 -0.97943 0.3" position="-885.8917 290.65459 463.49347">
			<a-entity id="door" gltf-model="models/door/scene.gltf" position="92.35511 285.6474 -175.52752" scale="1.47179 2.8 8.704" rotation="180 180 0"></a-entity>
		</a-box>
		<a-image src="images/backyardd.png" position="-730.10017 288.6526 433.20165" scale="295.64794 570.11472 21.20822"></a-image>
		<a-entity id="cupboard" gltf-model="models/cupboard2/scene.gltf" position="-1005.65549 11.1085 -567.42369" scale="2 1.83 1.6968"></a-entity>
		<a-entity id="table" gltf-model="models/table/scene.gltf" position="-459.34108 7.67444 -297.94259" scale="2.25 2.25 2.25" rotation="0 90 0"></a-entity>
		<a-entity id="stove" gltf-model="models/stove/scene.gltf" position="-1095.17736 7.8103 -247.59262" scale="2.93 2.58 2.5" rotation="0 90 0"></a-entity>
		<a-entity id="kitchen-table" gltf-model="models/kitchen-table/scene.gltf" position="-1044.98851 4.2858 107.10017" scale="7 8 8"></a-entity>
		<a-entity id="bed" gltf-model="models/bed/scene.gltf" position="749.55051 267.60095 -398.02314" scale="0.45 0.3 0.4"></a-entity>
		<a-entity gltf-model="models/rocking-chair/scene.gltf" position="1081.85111 30.73143 335.42347" scale="6.5 6.5 6.5" rotation="0 -133.38686653763617 0" animation-mixer="clip:Take 001; loop:repeat; timeScale: 1.5;"></a-entity>
		<a-entity id="lamp" gltf-model="models/lamp/scene.gltf" position="1096.84219 500.31331 -729.41131" scale="2.5 2.5 2.5"></a-entity>
		<a-entity id="mirror" gltf-model="models/mirror/scene.gltf" position="396.06243 408.65648 401.92901" scale="80 80 80" rotation="0 180 0"></a-entity>
		<a-entity id="kettle" gltf-model="models/kettle/scene.gltf" position="-1065.74364 306.87599 -290.63223" scale="300 300 300" rotation="0 -95.99907857416943 0"></a-entity>
		<a-entity id="red-table" gltf-model="models/red-table/scene.gltf" position="430.80217 102.42692 386.32251" scale="100 100 100" rotation="0 -90 0"></a-entity>
		<a-entity id="fan" gltf-model="models/fan/scene.gltf" position="-1051.25472 334.24275 260.38574" scale="0.6 0.6 0.6" rotation="0 120.0386687844734 0" animation-mixer="clip:Cube.003|Cube.003Action; loop:repeat; timeScale: 1.5;"></a-entity>
		<a-entity id="radio" gltf-model="models/radio/scene.gltf" position="-474.88829 225.28318 -230.74063" scale="3.5 3.5 3.5" rotation="0 94.99697539048562 0"></a-entity>
		<a-entity id="bottles" gltf-model="models/bottles/scene.gltf" position="-1116.81223 285.66254 38.47708" scale="25 25 25" rotation="0 -3.712193554652604 0"></a-entity>
		<!-- <a-entity id="lantern" gltf-model="models/lantern/scene.gltf" position="173.36534 2.122 374.32279" scale="3.5 3.5 3.5" rotation="0 25.220456226068578 0"></a-entity> -->
		<a-entity id="wheelchair" gltf-model="models/wheelchair/scene.gltf" position="-311.023 149.99064 298.90755" scale="160 160 160"></a-entity>
		<a-entity id="phone" gltf-model="models/phone/scene.gltf" position="418.60701 228.39259 386.49758" scale="60 60 60" rotation="0 169.99715077311038 0"></a-entity>

		<!--Lighitng-->
		<a-entity light="type: ambient; color: #ffffff; intensity: 0.3"></a-entity>
	</a-scene>
	<!--Flash-->
	<div class="flashtop"></div>
	<div class="flashleft"></div>
	<div class="flashright"></div>
	<div class="flashbottom"></div>
	<!--AUDIO-->
	<audio controls id="ambi" loop>
	  <source src="sound/mp3-ambience.mp3" type="audio/ogg">
	  <source src="sound/ogg-ambience.ogg" type="audio/mpeg">
	  Your browser does not support the audio tag.
	</audio>
	<audio controls id="radio-sound">
	  <source src="sound/mp3-radio.mp3" type="audio/ogg">
	  <source src="sound/ogg-radio.ogg" type="audio/mpeg">
	  Your browser does not support the audio tag.
	</audio>
	<audio controls id="phone-sound">
	  <source src="sound/mp3-phone.mp3" type="audio/ogg">
	  <source src="sound/ogg-phone.ogg" type="audio/mpeg">
	  Your browser does not support the audio tag.
	</audio>
	<audio controls id="door-sound">
	  <source src="sound/mp3-door.mp3" type="audio/ogg">
	  <source src="sound/ogg-door.ogg" type="audio/mpeg">
	  Your browser does not support the audio tag.
	</audio>
	<audio controls id="footsteps-sound">
	  <source src="sound/mp3-footsteps.mp3" type="audio/ogg">
	  <source src="sound/ogg-footsteps.ogg" type="audio/mpeg">
	  Your browser does not support the audio tag.
	</audio>

	<div class="msg" id="radio-msg">
		<div class="text-prompt">
		<button class="close" onclick="document.getElementById('radio-msg').style.display = 'none'">×</button>
		<p>AFTER HER HUSBAND’S DEATH, THE RADIO WOULD SUDDENLY BROADCAST THE TRANSMISSION. “...YOU CANNOT KILL ME, YOU CANNOT KILL ME...”</p>
		</div>
	</div>

	<div class="msg" id="phone-msg">
		<div class="text-prompt">
		<button class="close" onclick="document.getElementById('phone-msg').style.display = 'none'">×</button>
		<p>UNTIL THE OLD WOMAN’S DEATH, THE PHONE WOULD RING AT 3 AM, EVERY DAY, WITHOUT ANY SOUND ON THE OTHER END. IT WOULD KEEP ON RINGING UNTIL IT WAS PICKED UP.</p>
		</div>
	</div>

	<div class="msg" id="mirror-msg">
		<div class="text-prompt">
		<button class="close" onclick="document.getElementById('mirror-msg').style.display = 'none'">×</button>
		<p>THE OLD LADY TRIES TO RUB IT OFF BUT IT STAYS. SHE LOOKED CLOSELY, THE HAND PRINT IS FROM INSIDE OF THE MIRROR, AS THEY SAY, “SOULS OF THE DEAD CAN BE TRAPPED IN MIRRORS”.</p>
		</div>
	</div>

	<div id="doorstate" style="position: fixed;top:-500px;"></div>
</body>
</html>
<script>
function playambi() {
	var x = document.getElementById('ambi');
	x.play();
}

var wheelchair = document.querySelector('#wheelchair');
wheelchair.addEventListener('fusing', function(evt){
	evt.target.setAttribute('animation', 'property: rotation; to: 0 68.201 0; dur: 2000;');
	var doorstate = document.querySelector('#doorstate').innerHTML;

	var doorparent = document.querySelector('#doorparent');
			doorparent.setAttribute('animation', 'property: rotation; to: 0 90 0; dur: 7000;');
	if (doorstate == ''){
		var doorplay = document.getElementById('door-sound');
		doorplay.play();
		document.getElementById('doorstate').innerHTML = '1';
	}
});

var radio = document.querySelector('#radio');
radio.addEventListener('fusing', function(evt){
	var radioplay = document.getElementById('radio-sound');
	radioplay.play();
	document.getElementById('radio-msg').style.display = 'block';
	document.getElementById('radio-msg').style.opacity = '1';

});

var phone = document.querySelector('#phone');
phone.addEventListener('fusing', function(evt){
	var phoneplay = document.getElementById('phone-sound');
	phoneplay.play();
	document.getElementById('phone-msg').style.display = 'block';
	document.getElementById('phone-msg').style.opacity = '1';

});

var mirror = document.querySelector('#mirror');
mirror.addEventListener('fusing', function(evt){
	document.getElementById('mirror-msg').style.display = 'block';
	document.getElementById('mirror-msg').style.opacity = '1';

});

var bed = document.querySelector('#bed');
bed.addEventListener('fusing', function(evt){
	var footplay = document.getElementById('footsteps-sound');
	footplay.play();
});
</script>